const t=t=>t.length>1&&t.endsWith("/")?t.slice(0,-1):t;class e{constructor(e,s){e=t(e),this.path=e,this.action=s,this.catchAll="*"===e;const{regExp:a,keys:h}=this._parsePattern(e)||{};this.regExp=a,this.keys=h}_parsePattern(t){const e=t.match(/(:[^/]+)/g)?.map((t=>t.substr(1)));return e&&{keys:e,regExp:new RegExp("^"+t.replace(/(:[^/]+)/g,"([^/]+)")+"$")}}match(t){return void 0!==t&&(this.regExp?this._getParams(t.match(this.regExp)):(this.catchAll||t===this.path)&&{})}_getParams(t){if(t){const e={};return this.keys.forEach(((s,a)=>e[s]=t[a+1])),e}}}export default class{constructor({routes:t=[],scrollRestoration:e="manual"}={}){this.routes=[],this.currentRoute=null,t.forEach((({path:t,action:e})=>this.route(t,e))),window.history.scrollRestoration=e,window.addEventListener("popstate",(()=>this._handleChange(window.location.pathname)))}route(t,s){this.routes.push(new e(t,s))}push(e){window.history.pushState(null,null,t(e)),this._handleChange(e)}replace(e){window.history.replaceState(null,null,t(e)),this._handleChange(e)}init(){this._handleChange(window.location.pathname,!0)}_handleChange(t,e=!1){for(const s of this.routes){const a=s.match(t);if(a){this.currentRoute={path:t,params:a},s.action(a,e);break}}}}
//# sourceMappingURL=index.esm.js.map
